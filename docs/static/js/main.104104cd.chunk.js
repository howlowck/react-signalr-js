(this["webpackJsonpreact-signalr"]=this["webpackJsonpreact-signalr"]||[]).push([[0],{24:function(e,n,t){e.exports=t(47)},29:function(e,n,t){},35:function(e,n,t){},47:function(e,n,t){"use strict";t.r(n);var o=t(23),a=t(6),c=t(1),r=t.n(c),i=t(10),l=t.n(i),u=(t(29),t(4));t(35);var s=function(e){var n=Object(u.c)((function(e){return e.connectEndpoint})),t=Object(u.c)((function(e){return e.joinEndpoint})),o=Object(u.c)((function(e){return e.sendEndpoint})),a=Object(u.c)((function(e){return e.userId})),c=Object(u.c)((function(e){return e.messages})),i=Object(u.c)((function(e){return e.connected})),l=Object(u.c)((function(e){return e.messageValue})),s=Object(u.c)((function(e){return e.groupNameValue})),d=Object(u.c)((function(e){return e.joined})),p=Object(u.b)(),m=e.onSendClick,E=e.onJoinClick,g=e.onConnectClick;return r.a.createElement("div",null,r.a.createElement("h3",null,"Your UserId: ",a),r.a.createElement("hr",null),r.a.createElement("h3",null,i?"Connected":"Connect"," to your SignalR Hub ",i?"(Refresh to Disconnect)":""),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{placeholder:"Connect Endpoint ie. {fnx-url}/api{?code=key} (don't include /negotiate)",value:n,onChange:function(e){return p({type:"SET_CONNECT_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Join Endpoint ie. {fnx-url}/api/addToGroup{?code=key}",value:t,onChange:function(e){return p({type:"SET_JOIN_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Send Endpoint ie. {fnx-url}/api/messages{?code=key}",value:o,onChange:function(e){return p({type:"SET_SEND_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("button",{onClick:function(){g(n,a)},disabled:!(n&&t&&o)||i},i?"Connected":"Connect")),r.a.createElement("br",null),"Join Group:",r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{value:s,onChange:function(e){return p({type:"SET_GROUP_VALUE",value:e.target.value})},disabled:d}),r.a.createElement("button",{onClick:function(){E(t,s,a)},disabled:!i||d},"Join")),r.a.createElement("br",null),d?"Send Message To ".concat(d,":"):"Send:",r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{value:l,onChange:function(e){return p({type:"SET_MESSAGE",value:e.target.value})}}),r.a.createElement("button",{onClick:function(){m(o,l,s),p({type:"SET_MESSAGE",value:""})},disabled:!d},"Send")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:"groupMessages"},d?r.a.createElement("h3",null,'Messages from "',d,'" Group'):"",r.a.createElement("div",{id:"messages"},c.map((function(e,n){return r.a.createElement("div",{key:n},e.message," ",r.a.createElement("span",{style:{fontSize:13}}," (",a===e.userId?"from ME":"from ".concat(e.userId),")"))})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var d=t(15),p=t(11),m=t(22),E=t.n(m),g={connectEndpoint:localStorage.getItem("react-signalr/connectEndpoint")||"",joinEndpoint:localStorage.getItem("react-signalr/joinEndpoint")||"",sendEndpoint:localStorage.getItem("react-signalr/sendEndpoint")||"",userId:"",groupNameValue:"",messageValue:"",connected:!1,groupJoined:null,messages:[],members:[]},b=E.a.generate();console.log("userId:",b);var f=Object(p.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,n=arguments.length>1?arguments[1]:void 0;return"SET_CONNECT_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/connectEndpoint",n.endpoint),Object(a.a)({},e,{connectEndpoint:n.endpoint})):"SET_JOIN_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/joinEndpoint",n.endpoint),Object(a.a)({},e,{joinEndpoint:n.endpoint})):"SET_SEND_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/sendEndpoint",n.endpoint),Object(a.a)({},e,{sendEndpoint:n.endpoint})):"SET_USER_ID"===n.type?Object(a.a)({},e,{userId:n.value}):"SET_GROUP_VALUE"===n.type?Object(a.a)({},e,{groupNameValue:n.value}):"SET_MESSAGE"===n.type?Object(a.a)({},e,{messageValue:n.value}):"SIGNALR_CONNECTED"===n.type?Object(a.a)({},e,{connected:!0}):"GROUP_JOINED"===n.type?Object(a.a)({},e,{joined:n.groupName}):"NEW_MESSAGE"===n.type?Object(a.a)({},e,{messages:[].concat(Object(o.a)(e.messages),[n.message])}):"SET_MEMBERS"===n.type?Object(a.a)({},e,{members:n.members}):e}));f.dispatch({type:"SET_USER_ID",value:b});l.a.render(r.a.createElement(u.a,{store:f},r.a.createElement(s,{onConnectClick:function(e,n){var t=(new d.b).withUrl("".concat(e,"&userId=").concat(n),{transport:d.a.WebSockets}).build();t.on("newMessage",(function(e){console.log("newMessage payload",e),f.dispatch({type:"NEW_MESSAGE",message:e})})),t.on("memberJoined",(function(e){console.log("memberJoined payload",e),e.newMember===n&&f.dispatch({type:"GROUP_JOINED",groupName:e.groupName})})),t.on("memberLeft",(function(e){console.log("memberLeft payload",e)})),t.on("memberLeftBroadcast",(function(e){console.log("memberLeftBroadcast payload",e)})),t.start().then((function(e){console.log("connectionId:",t.connectionId);var n=t.connectionId;console.log("invoking send"),console.log("connected to signalR"),f.dispatch({type:"SIGNALR_CONNECTED",connectionId:n})}))},onSendClick:function(e,n,t){return fetch("".concat(e,"&userId=").concat(b),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageData:{message:n,userId:b},targetGroupName:t})})},onJoinClick:function(e,n,t){return console.log("joining group..."),fetch("".concat(e,"&groupName=").concat(n,"&userId=").concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:n,userId:t})}).catch((function(e){console.log(e)})).then((function(){}))}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.104104cd.chunk.js.map