(this["webpackJsonpreact-signalr"]=this["webpackJsonpreact-signalr"]||[]).push([[0],{25:function(e,n,t){e.exports=t(49)},30:function(e,n,t){},37:function(e,n,t){},49:function(e,n,t){"use strict";t.r(n);var o=t(24),a=t(5),c=t(1),r=t.n(c),l=t(10),i=t.n(l),s=(t(30),t(4)),u=t(20),d=t.n(u);t(37);var p=function(e,n,t,o){return e?r.a.createElement("div",{className:"groupMessages"},r.a.createElement("h3",null,'"',e,'" Group'),r.a.createElement("h4",null,"Members"),r.a.createElement("div",{className:"members"},n.map((function(e){return e===t?r.a.createElement("span",{key:e,style:{background:"blue",color:"white",padding:5}},"You"):r.a.createElement("span",{key:e,style:{padding:5,border:"1px gray solid"}},e)}))),r.a.createElement("h4",null,"Messages"),r.a.createElement("div",{id:"messages"},o.map((function(e,n){return r.a.createElement("div",{key:n},e.message," ",r.a.createElement("span",{style:{fontSize:13}}," (",t===e.userId?"from ME":"from ".concat(e.userId)," [",d()(e.utcTimestamp).format("LTS"),"])"))})))):""},m=function(e){var n=Object(s.c)((function(e){return e.connectEndpoint})),t=Object(s.c)((function(e){return e.joinEndpoint})),o=Object(s.c)((function(e){return e.sendEndpoint})),a=Object(s.c)((function(e){return e.messagesEndpoint})),c=Object(s.c)((function(e){return e.userId})),l=Object(s.c)((function(e){return e.messages})),i=Object(s.c)((function(e){return e.connected})),u=Object(s.c)((function(e){return e.messageValue})),d=Object(s.c)((function(e){return e.groupNameValue})),m=Object(s.c)((function(e){return e.joined})),E=Object(s.c)((function(e){return e.members})),g=Object(s.b)(),b=e.onSendClick,f=e.onJoinClick,S=e.onConnectClick;return r.a.createElement("div",null,r.a.createElement("h3",null,"Your UserId: ",c),r.a.createElement("hr",null),r.a.createElement("h3",null,i?"Connected":"Connect"," to your SignalR Hub ",i?"(Refresh to Disconnect)":""),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{placeholder:"Connect Endpoint ie. {fnx-url}/api{?code=key} (don't include /negotiate)",value:n,onChange:function(e){return g({type:"SET_CONNECT_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Join Endpoint ie. {fnx-url}/api/addToGroup{?code=key}",value:t,onChange:function(e){return g({type:"SET_JOIN_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Send Endpoint ie. {fnx-url}/api/messages{?code=key}",value:o,onChange:function(e){return g({type:"SET_SEND_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Messages Endpoint ie. {fnx-url}/getMessages{?code=key}",value:a,onChange:function(e){return g({type:"SET_MESSAGES_ENDPOINT",endpoint:e.target.value})},style:{width:400},disabled:i}),r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){S(n,c)},disabled:!(n&&t&&o)||i},i?"Connected":"Connect")),r.a.createElement("br",null),"Join Group:",r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{value:d,onChange:function(e){return g({type:"SET_GROUP_VALUE",value:e.target.value})},disabled:m}),r.a.createElement("button",{onClick:function(){f(t,a,d,c)},disabled:!i||m},"Join")),r.a.createElement("br",null),m?"Send Message To ".concat(m,":"):"Send:",r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{value:u,onChange:function(e){return g({type:"SET_MESSAGE",value:e.target.value})}}),r.a.createElement("button",{onClick:function(){b(o,d,u),g({type:"SET_MESSAGE",value:""})},disabled:!m},"Send")),r.a.createElement("br",null),r.a.createElement("br",null),p(m,E,c,l))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var E=t(15),g=t(11),b=t(23),f=t.n(b),S={connectEndpoint:localStorage.getItem("react-signalr/connectEndpoint")||"",joinEndpoint:localStorage.getItem("react-signalr/joinEndpoint")||"",sendEndpoint:localStorage.getItem("react-signalr/sendEndpoint")||"",messagesEndpoint:localStorage.getItem("react-signalr/messagesEndpoint")||"",userId:"",groupNameValue:"",messageValue:"",connected:!1,groupJoined:null,messages:[],members:[]},y=f.a.generate();console.log("userId:",y);var h=Object(g.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,n=arguments.length>1?arguments[1]:void 0;return"SET_CONNECT_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/connectEndpoint",n.endpoint),Object(a.a)({},e,{connectEndpoint:n.endpoint})):"SET_JOIN_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/joinEndpoint",n.endpoint),Object(a.a)({},e,{joinEndpoint:n.endpoint})):"SET_SEND_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/sendEndpoint",n.endpoint),Object(a.a)({},e,{sendEndpoint:n.endpoint})):"SET_MESSAGES_ENDPOINT"===n.type?(localStorage.setItem("react-signalr/messagesEndpoint",n.endpoint),Object(a.a)({},e,{messagesEndpoint:n.endpoint})):"SET_USER_ID"===n.type?Object(a.a)({},e,{userId:n.value}):"SET_GROUP_VALUE"===n.type?Object(a.a)({},e,{groupNameValue:n.value}):"SET_MESSAGE"===n.type?Object(a.a)({},e,{messageValue:n.value}):"SIGNALR_CONNECTED"===n.type?Object(a.a)({},e,{connected:!0}):"GROUP_JOINED"===n.type?Object(a.a)({},e,{joined:n.groupName}):"NEW_MESSAGE"===n.type?Object(a.a)({},e,{messages:[].concat(Object(o.a)(e.messages),[n.message])}):"SET_MEMBERS"===n.type?Object(a.a)({},e,{members:n.members}):"SET_MESSAGES"===n.type?Object(a.a)({},e,{messages:n.messages}):e}));h.dispatch({type:"SET_USER_ID",value:y});var O=function(e,n){return fetch("".concat(e).concat(e.indexOf("?")<0?"?":"&","groupName=").concat(n)).then((function(e){return e.json()}))};i.a.render(r.a.createElement(s.a,{store:h},r.a.createElement(m,{onConnectClick:function(e,n){var t=(new E.b).withUrl("".concat(e).concat(e.indexOf("?")<0?"?":"&","userId=").concat(n),{transport:E.a.WebSockets}).build();t.on("group:newMessage",(function(e){console.log("group:newMessage payload",e),h.dispatch({type:"NEW_MESSAGE",message:e})})),t.on("group:memberJoined",(function(e){console.log("group:memberJoined payload",e),e.newMember===n&&h.dispatch({type:"GROUP_JOINED",groupName:e.groupName}),h.dispatch({type:"SET_MEMBERS",groupName:e.groupName,members:e.members})})),t.on("group:memberLeft",(function(e){console.log("group:memberLeft payload",e),h.dispatch({type:"SET_MEMBERS",groupName:e.groupName,members:e.members})})),t.on("global:newMessage",(function(e){console.log("global:newMessage payload",e)})),t.on("user:newMessage",(function(e){console.log("user:newMessage payload",e)})),t.on("global:memberLeft",(function(e){console.log("global:memberLeft payload",e)})),t.start().then((function(e){console.log("connectionId:",t.connectionId);var n=t.connectionId;console.log("invoking send"),console.log("connected to signalR"),h.dispatch({type:"SIGNALR_CONNECTED",connectionId:n})}))},onSendClick:function(e,n,t){return fetch("".concat(e).concat(e.indexOf("?")<0?"?":"&","userId=").concat(y),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageData:{message:t,userId:y},targetGroupName:n})})},onJoinClick:function(e,n,t,o){return console.log("joining group..."),fetch("".concat(e).concat(e.indexOf("?")<0?"?":"&","groupName=").concat(t,"&userId=").concat(o),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groupName:t,userId:o})}).catch((function(e){console.log(e)})).then((function(){return O(n,t)})).then((function(e){h.dispatch({type:"SET_MESSAGES",messages:e})}))}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.46176bbd.chunk.js.map